(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");if(a.length)for(var o=a.length-1;o>-1&&!t;)t=a[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function t(e){const t=document.createElement("button");switch(e){case 1:t.className="cell cell_one cell_close";break;case 2:t.className="cell cell_two cell_close";break;case 3:t.className="cell cell_three cell_close";break;case 4:t.className="cell cell_four cell_close";break;case 5:t.className="cell cell_five cell_close";break;case 6:t.className="cell cell_six cell_close";break;case 7:t.className="cell cell_seven cell_close";break;case 8:t.className="cell cell_eight cell_close";break;case 9:t.className="cell cell_mine cell_close";break;default:t.className="cell cell_empty cell_close"}return 0!==e&&9!==e&&(t.textContent=e),t}const n=e.p+"9f776e97fb460a2dada1.mp3",a=e.p+"b83723f037844d797761.mp3",o=e.p+"876aaa7396c15ad49872.mp3",c=e.p+"fb4c7651f758bcc97bd5.mp3",s=e.p+"bb950f1cd7c723ac10b1.mp3",l="user",r="auto";let u=10,m=10,d=10,i=0,p=0,v=u-p,_=0,S=!0,f=!1,h=!1,y=!1,L=!1,b=!1,g="light",E=[],N={},q={};function x(e){let t=0;t=e||10;const n=[];let a=0;for(;a<t;){n[a]=[];for(let e=0;e<t;)n[a].push(0),e+=1;a+=1}return n}function w(e){return Math.floor(Math.random()*e)}function C(e,t){const n=e.length,a=function(e,t){const n=e**2,a=[];for(;a.length<u;){const e=w(n);-1===a.indexOf(e)&&e!==t&&a.push(e)}return a}(n,t),o=e;for(let e=0;e<a.length;){const t=a[e]/n,c=Math.floor(t),s=Math.round((t-c)*n);o[c][s]=9,e+=1}return o}function k(e){const t=e,n=t.length;for(let e=0;e<n;){for(let a=0;a<n;){if(9===t[e][a])for(let o=-1;o<=1;){const c=e+o;for(let e=-1;e<=1;){const o=a+e;c>=0&&c<n&&o>=0&&o<n&&9!==t[c][o]&&(t[c][o]+=1),e+=1}o+=1}a+=1}e+=1}return t}function $(){const e=document.querySelector(".mines"),t=document.querySelector(".flags"),n=document.querySelector(".steps"),a=document.querySelector(".times");e.textContent=`${u}`.padStart(3,0),t.textContent=`${p}`.padStart(3,0),a.textContent="000",n.textContent="000"}function A(e){const n=document.querySelector(".playground"),a=e.length;for(let o=0;o<a;){for(let c=0;c<a;)n.append(t(e[o][c])),c+=1;o+=1}}function M(){const e=document.querySelector(".score");e.innerHTML="",e.textContent="Last 10 games won!";let t=0;E.forEach((n=>{t+=1;const a=document.createElement("li");a.className="results",a.textContent=`${t}. ${n}`,e.append(a)}))}function T(e){const t=e,n=document.querySelector(".wrapper"),a=document.querySelector(".theme");n.className=`wrapper outer wrapper_${t}`,"light"===g?(a.classList.remove("theme_dark"),n.classList.remove("wrapper_dark")):(a.classList.add("theme_dark"),n.classList.add("wrapper_dark"))}function I(e,t,n){const a=document.querySelector(".modal__wrapper"),o=document.querySelector(".modal__title"),c=document.querySelector(".subtitle_first"),s=document.querySelector(".subtitle_second"),l=document.querySelector(".subtitle_third");let r="",u="",m="",d="";a.classList.add("modal__wrapper_overlay"),"Save"===e?(r="The game has been saved!",u=t):"Load"===e?(r="The game has been load!",u=t):"Not save"===e?(r="You don't have a saved game",u="Use the Save Game before"):"Choose save"===e?(r="Choose a saved game:",u=t,m=L?n:"No saved game yet",d="Start New Game"):"Win"===e?(r=`You ${e}! Time: ${i} sec, Steps:  ${_}`,u="You're a real genius!"):(r=`You ${e}! Time: ${i} sec, Steps:  ${_}`,u="Try again!"),o.textContent=r,c.textContent=u,s.textContent=m,l.textContent=d}function z(){const e=document.querySelector(".modal__wrapper"),t=document.querySelector(".modal");e.classList.remove("modal__wrapper_overlay"),t.classList.remove("modal__save")}function G(e){const t=e;t.volume=y?0:1,t.play()}function F(){const e=document.querySelector(".times"),t=setInterval((()=>{f||S||h?clearInterval(t):(i+=1,e.textContent=`${i}`.padStart(3,0))}),1e3)}function j(e){const t=document.querySelectorAll(".cell_show"),n=document.querySelectorAll(".cell_mine"),a=document.querySelector(".emoji");let o=0;t.forEach((e=>{e.classList.contains("cell_mine")||(o+=1)})),o===e**2-u&&(!function(){const e=`Winner Time: ${i} sec, Steps:  ${_}`;10===E.length&&E.pop(),E.unshift(e),M()}(),I("Win"),G(new Audio(c)),h=!0,a.classList.add("win"),n.forEach((e=>{e.classList.contains("cell_mine")&&e.classList.add("cell_flag")})))}function O(e){const t=e;t.classList.contains("cell_flag")||(t.classList.remove("cell_close"),t.classList.add("cell_show"))}function W(e){const t=e,n=document.querySelector(".mines"),a=document.querySelector(".flags");t.classList.contains("cell_close")&&(G(new Audio(o)),t.classList.contains("cell_flag")?(t.classList.remove("cell_flag"),p-=1,v=u-p,n.textContent=`${v}`.padStart(3,0),a.textContent=`${p}`.padStart(3,0)):(t.classList.add("cell_flag"),p+=1,v=u-p,n.textContent=`${v}`.padStart(3,0),a.textContent=`${p}`.padStart(3,0)))}function H(e){const t=document.querySelectorAll(".cell");return Array.from(t).indexOf(e.target)}function U(e,t,n){let a=[];n&&(a=n),a.push(t);const o=document.querySelectorAll(".cell"),c=e.length,s=t/c,l=Math.floor(s),r=Math.round((s-l)*c);for(let t=-1;t<=1;){const n=l+t;for(let t=-1;t<=1;){const s=r+t;if(n>=0&&n<c&&s>=0&&s<c&&(n!==l||s!==r)){const t=n*c+s,l=o[t];O(l),l.classList.contains("cell_empty")&&-1===a.indexOf(t)&&U(e,t,a)}t+=1}t+=1}}function P(){const e=document.querySelector(".steps");_+=1,e.textContent=`${_}`.padStart(3,0)}function Y(){G(new Audio(n))}function J(){const e=document.querySelector(".volume");y?(e.classList.remove("volume_mute"),y=!1):(e.classList.add("volume_mute"),Y(),y=!0)}function D(){const e=document.querySelector(".theme"),t=document.querySelector(".wrapper");"light"===g?(e.classList.add("theme_dark"),t.classList.add("wrapper_dark"),g="dark"):(e.classList.remove("theme_dark"),t.classList.remove("wrapper_dark"),g="light")}function B(e){let t="";const n=document.querySelector(".playground"),a=(new Date).toLocaleString();"user"===e?(L=!0,t="The player saved the game",N.name=`${t}: ${a}`,N.quantityMines=u,N.sizePlayground=m,N.counterTime=i,N.counterFlag=p,N.currentAmountMines=v,N.counterSteps=_,N.isFirstClick=S,N.isLose=f,N.isWinner=h,N.isMute=y,N.haveSaveUser=L,N.haveSaveAuto=b,N.currentTheme=g,N.score=E,N.html=n.innerHTML,I("Save",N.name)):"auto"===e&&(b=!0,t="Auto save game",q.name=`${t}: ${a}`,q.quantityMines=u,q.sizePlayground=m,q.counterTime=i,q.counterFlag=p,q.currentAmountMines=v,q.counterSteps=_,q.isFirstClick=S,q.isLose=f,q.isWinner=h,q.isMute=y,q.haveSaveUser=L,q.haveSaveAuto=b,q.currentTheme=g,q.score=E,q.html=n.innerHTML,I("Save",q.name))}function K(e,t,n){const a=document.querySelector(".wrapper"),o=document.querySelector(".playground"),c=document.querySelector(".quantity-mines"),s=document.querySelector(".size"),d=document.querySelector(".volume"),E=document.querySelector(".theme"),N=document.querySelector(".mines"),q=document.querySelector(".flags"),x=document.querySelector(".steps"),w=document.querySelector(".times");n&&z(),t===l?L?(o.innerHTML=e.html,u=e.quantityMines,m=e.sizePlayground,i=e.counterTime,p=e.counterFlag,v=e.currentAmountMines,_=e.counterSteps,S=e.isFirstClick,f=e.isLose,h=e.isWinner,y=e.isMute,L=e.haveSaveUser,b=e.haveSaveAuto,g=e.currentTheme,a.className=`wrapper outer wrapper_${m}`,c.value=u,"10"===m?s.selectedIndex=1:"15"===m?s.selectedIndex=2:"25"===m&&(s.selectedIndex=3),y?d.classList.add("volume_mute"):(d.classList.remove("volume_mute"),Y()),"light"===g?E.classList.remove("theme_dark"):(E.classList.add("theme_dark"),g="dark"),N.textContent=`${v}`.padStart(3,0),q.textContent=`${p}`.padStart(3,0),x.textContent=`${_}`.padStart(3,0),w.textContent=`${i}`.padStart(3,0),F(),M(),I("Load",e.name),T(m)):I("Not save"):t===r&&(b?(o.innerHTML=e.html,u=e.quantityMines,m=e.sizePlayground,i=e.counterTime,p=e.counterFlag,v=e.currentAmountMines,_=e.counterSteps,S=e.isFirstClick,f=e.isLose,h=e.isWinner,y=e.isMute,L=e.haveSaveUser,b=e.haveSaveAuto,g=e.currentTheme,a.className=`wrapper outer wrapper_${m}`,c.value=u,"10"===m?s.selectedIndex=1:"15"===m?s.selectedIndex=2:"25"===m&&(s.selectedIndex=3),y?d.classList.add("volume_mute"):(d.classList.remove("volume_mute"),Y()),"light"===g?E.classList.remove("theme_dark"):(E.classList.add("theme_dark"),g="dark"),N.textContent=`${v}`.padStart(3,0),q.textContent=`${p}`.padStart(3,0),x.textContent=`${_}`.padStart(3,0),w.textContent=`${i}`.padStart(3,0),F(),M(),I("Load",e.name),T(m)):I("Not save"))}function Q(e,t){document.querySelector(".playground").innerHTML="";const n=k(C(x(e),t)),a=n.length;return A(n),M(),T(a),n}function R(e){i=0,p=0,_=0,document.querySelector(".emoji").className="emoji happy",Q(e),$(),S=!0,h=!1,f=!1,Y()}function V(e){e&&z(),m=d,R(m)}window.onload=function(){!function(){const e=document.querySelector("body"),t=document.createElement("main");t.className="main";const n=document.createElement("section");n.className="wrapper outer";const a=document.createElement("h1");a.className="title inter",a.textContent="Minesweeper";const o=document.createElement("div");o.className="settings inter";const c=document.createElement("div");c.className="controls";const s=document.createElement("div");s.className="buttons-panel";const l=document.createElement("button");l.className="button outer button_new-game",l.textContent="New Game";const r=document.createElement("button");r.className="button outer button_save",r.textContent="Save Game";const u=document.createElement("button");u.className="button outer button_load",u.textContent="Load Game";const m=document.createElement("input");m.className="quantity-mines input inter",m.type="number",m.id="quantity-mines",m.setAttribute("min","10"),m.setAttribute("max","99"),m.setAttribute("placeholder","10 Mines...");const d=document.createElement("select");d.className="size input inter",d.textContent="Level";const i=document.createElement("option");i.className="def-size",i.setAttribute("value",""),i.setAttribute("disabled","disabled"),i.setAttribute("selected","selected"),i.textContent="Level ( easy )",i.value=10;const p=document.createElement("option");p.className="small-size",p.textContent="easy - 10x10",p.value=10;const v=document.createElement("option");v.className="medium-size",v.textContent="medium - 15x15",v.value=15;const _=document.createElement("option");_.className="hard-size",_.textContent="hard - 25x25",_.value=25;const S=document.createElement("button");S.className="volume outer";const f=document.createElement("button");f.className="theme outer";const h=document.createElement("div");h.className="status-game inter";const y=document.createElement("div");y.className="status status-mines";const L=document.createElement("label");L.className="label-mines",L.textContent="Mines left";const b=document.createElement("span");b.className="amount inter mines";const g=document.createElement("div");g.className="status status-flags";const E=document.createElement("label");E.className="label-flags",E.textContent="Flags used";const N=document.createElement("span");N.className="amount inter flags";const q=document.createElement("button");q.className="emoji happy";const x=document.createElement("div");x.className="status status-steps";const w=document.createElement("label");w.className="label-steps",w.textContent="Steps";const C=document.createElement("span");C.className="amount inter steps";const k=document.createElement("div");k.className="status status-time";const $=document.createElement("label");$.className="label-time",$.textContent="Time";const A=document.createElement("span");A.className="amount inter times";const M=document.createElement("div");M.className="playground inter";const T=document.createElement("ol");T.className="score inter",T.textContent="Last 10 games won!";const I=document.createElement("h2");I.className="modal__title";const z=document.createElement("h3");z.className="modal__subtitle subtitle_first";const G=document.createElement("button");G.className="button outer button__modal_save-auto hidden",G.textContent="Load Auto Save";const F=document.createElement("h3");F.className="modal__subtitle subtitle_second hidden";const j=document.createElement("button");j.className="button outer button__modal_save-player hidden",j.textContent="Load Your Save";const O=document.createElement("h3");O.className="modal__subtitle subtitle_third hidden";const W=document.createElement("button");W.className="button outer button__modal_new-game hidden",W.textContent="Start New Game";const H=document.createElement("button");H.className="button outer button__modal_close",H.textContent="Close";const U=document.createElement("div");U.className="modal";const P=document.createElement("div");P.className="modal__wrapper",y.append(L),y.append(b),g.append(E),g.append(N),x.append(w),x.append(C),k.append($),k.append(A),h.append(y),h.append(g),h.append(q),h.append(x),h.append(k),d.append(i),d.append(p),d.append(v),d.append(_),c.append(f),c.append(m),c.append(d),c.append(S),s.append(l),s.append(r),s.append(u),o.append(c),o.append(s),U.append(I),U.append(z),U.append(G),U.append(F),U.append(j),U.append(O),U.append(W),U.append(H),P.append(U),n.append(a),n.append(o),n.append(h),n.append(M),n.append(T),n.append(P),t.append(n),e.append(t)}(),$();const e=document.querySelector(".size");m=e.value,e.addEventListener("change",(()=>{d=e.value,Y()}));const t=document.querySelector(".quantity-mines");t.addEventListener("change",(()=>{Y(),t.value<10?(u=10,t.value=u):t.value>99?(u=99,t.value=u):u=t.value}));const n=k(C(x(m))),o=n.length;let c=[];A(n),T(o);const p=document.querySelector(".emoji"),v=document.querySelector(".volume"),_=document.querySelector(".button_new-game"),h=document.querySelector(".button_save"),y=document.querySelector(".button_load"),L=document.querySelector(".button__modal_close"),b=document.querySelector(".button__modal_save-auto"),g=document.querySelector(".button__modal_save-player"),E=document.querySelector(".button__modal_new-game"),w=document.querySelector(".theme"),M=document.querySelector(".playground");M.addEventListener("mouseup",(function(e){const t=e.target,n=t.classList.contains("cell_flag"),o=t.classList.contains("cell_close");if(S){const t=H(e);c=Q(m,t),function(e,t,n){const a=document.querySelectorAll(".cell");let o=0;F(),a.forEach((a=>{if(o===n){const o=a;2===e.button?W(o):o.classList.contains("cell_empty")?(P(),Y(),O(o),U(t,n)):o.classList.contains("cell")&&(P(),Y(),O(o)),j(m)}o+=1}))}(e,c,t)}else if(2===e.button)W(t);else if(!n&&o&&!f){if(P(),t.classList.contains("cell_mine"))t.classList.add("exp"),function(){G(new Audio(a)),G(new Audio(s)),i=0;const e=document.querySelectorAll(".cell_mine"),t=document.querySelectorAll(".cell_flag"),n=document.querySelectorAll(".cell_close"),o=document.querySelector(".emoji");I("Lose"),o.classList.remove("happy"),o.classList.add("sad"),e.forEach((e=>{e.classList.contains("cell_flag")||e.classList.add("cell_show")})),t.forEach((e=>{e.classList.contains("cell_mine")||(e.classList.remove("cell_flag"),e.classList.remove("cell_close"),e.classList.add("cell_flag-wrong"))})),n.forEach((e=>{e.classList.remove("cell_close"),e.classList.add("cell_blocked")})),S=!0}(),f=!0;else if(t.classList.contains("cell_empty")){Y(),O(t);const n=H(e);U(c,n)}else t.classList.contains("cell")&&(Y(),O(t));j(m)}S=!1})),M.addEventListener("contextmenu",(function(e){e.preventDefault()})),p.addEventListener("click",(()=>R(m))),_.addEventListener("click",V),L.addEventListener("click",z),b.addEventListener("click",(()=>K(q,r,"closeModal"))),g.addEventListener("click",(()=>K(N,l,"closeModal"))),E.addEventListener("click",(()=>V("closeModal"))),h.addEventListener("click",(()=>B(l))),y.addEventListener("click",(()=>K(N,l))),v.addEventListener("click",J),w.addEventListener("click",D)},window.addEventListener("load",(function(){if(localStorage.getItem("autoSavedGameToLs")){const n=JSON.parse(localStorage.getItem("autoSavedGameToLs")),a=JSON.parse(localStorage.getItem("playerSavedGameToLs"));q=n,N=a,L=q.haveSaveUser,b=q.haveSaveAuto,E=n.score,e=q,t=N,document.querySelector(".modal").classList.add("modal__save"),I("Choose save",e.name,t.name)}var e,t})),window.addEventListener("beforeunload",(function(){B(r),localStorage.setItem("autoSavedGameToLs",JSON.stringify(q)),localStorage.setItem("playerSavedGameToLs",JSON.stringify(N))}))})()})();