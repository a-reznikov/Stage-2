(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");if(a.length)for(var c=a.length-1;c>-1&&!t;)t=a[c--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function t(e){const t=document.createElement("button");switch(e){case 1:t.className="cell cell_one cell_close";break;case 2:t.className="cell cell_two cell_close";break;case 3:t.className="cell cell_three cell_close";break;case 4:t.className="cell cell_four cell_close";break;case 5:t.className="cell cell_five cell_close";break;case 6:t.className="cell cell_six cell_close";break;case 7:t.className="cell cell_seven cell_close";break;case 8:t.className="cell cell_eight cell_close";break;case 9:t.className="cell cell_mine cell_close";break;default:t.className="cell cell_empty cell_close"}return 0!==e&&9!==e&&(t.textContent=e),t}const n=e.p+"9f776e97fb460a2dada1.mp3",a=e.p+"b83723f037844d797761.mp3",c=e.p+"876aaa7396c15ad49872.mp3",o=e.p+"fb4c7651f758bcc97bd5.mp3",s=e.p+"bb950f1cd7c723ac10b1.mp3";let l=10,r=10,u=10,m=0,d=0,i=l-d,p=0,_=!0,v=!1,f=!1,S=!1,y=!1,h="light",b=[],L={},g={};function E(e){let t=0;t=e||10;const n=[];let a=0;for(;a<t;){n[a]=[];for(let e=0;e<t;)n[a].push(0),e+=1;a+=1}return n}function N(e){return Math.floor(Math.random()*e)}function q(e,t){const n=e.length,a=function(e,t){const n=e**2,a=[];for(;a.length<l;){const e=N(n);-1===a.indexOf(e)&&e!==t&&a.push(e)}return a}(n,t),c=e;for(let e=0;e<a.length;){const t=a[e]/n,o=Math.floor(t),s=Math.round((t-o)*n);c[o][s]=9,e+=1}return c}function w(e){const t=e,n=t.length;for(let e=0;e<n;){for(let a=0;a<n;){if(9===t[e][a])for(let c=-1;c<=1;){const o=e+c;for(let e=-1;e<=1;){const c=a+e;o>=0&&o<n&&c>=0&&c<n&&9!==t[o][c]&&(t[o][c]+=1),e+=1}c+=1}a+=1}e+=1}return t}function x(){const e=document.querySelector(".mines"),t=document.querySelector(".flags"),n=document.querySelector(".steps"),a=document.querySelector(".times");e.textContent=`${l}`.padStart(3,0),t.textContent=`${d}`.padStart(3,0),a.textContent="000",n.textContent="000"}function C(e){const n=document.querySelector(".playground"),a=e.length;for(let c=0;c<a;){for(let o=0;o<a;)n.append(t(e[c][o])),o+=1;c+=1}}function k(){const e=document.querySelector(".score");e.innerHTML="",e.textContent="Last 10 games won!";let t=0;b.forEach((n=>{t+=1;const a=document.createElement("li");a.className="results",a.textContent=`${t}. ${n}`,e.append(a)}))}function $(e){const t=e,n=document.querySelector(".wrapper"),a=document.querySelector(".theme");n.className=`wrapper outer wrapper_${t}`,"light"===h?(a.classList.remove("theme_dark"),n.classList.remove("wrapper_dark")):(a.classList.add("theme_dark"),n.classList.add("wrapper_dark"))}function T(e,t,n){const a=document.querySelector(".modal__wrapper"),c=document.querySelector(".modal__title"),o=document.querySelector(".subtitle_first"),s=document.querySelector(".subtitle_second"),l=document.querySelector(".subtitle_third");let r="",u="",d="",i="";a.classList.add("modal__wrapper_overlay"),"Save"===e?(r="The game has been saved!",u=t):"Load"===e?(r="The game has been load!",u=t):"Not save"===e?(r="You don't have a saved game",u="Use the Save Game before"):"Choose save"===e?(r="Choose a saved game:",u=t,d=y?n:"No saved game yet",i="Start New Game"):"Win"===e?(r=`You ${e}! Time: ${m} sec, Steps:  ${p}`,u="You're a real genius!"):(r=`You ${e}! Time: ${m} sec, Steps:  ${p}`,u="Try again!"),c.textContent=r,o.textContent=u,s.textContent=d,l.textContent=i}function A(){const e=document.querySelector(".modal__wrapper"),t=document.querySelector(".modal");e.classList.remove("modal__wrapper_overlay"),t.classList.remove("modal__save")}function M(e){const t=e;t.volume=S?0:1,t.play()}function G(){const e=document.querySelector(".times"),t=setInterval((()=>{v||_||f?clearInterval(t):(m+=1,e.textContent=`${m}`.padStart(3,0))}),1e3)}function z(e){const t=document.querySelectorAll(".cell_show"),n=document.querySelectorAll(".cell_mine"),a=document.querySelector(".emoji");let c=0;t.forEach((e=>{e.classList.contains("cell_mine")||(c+=1)})),c===e**2-l&&(!function(){const e=`Winner Time: ${m} sec, Steps:  ${p}`;10===b.length&&b.pop(),b.unshift(e),k()}(),T("Win"),M(new Audio(o)),f=!0,a.classList.add("win"),n.forEach((e=>{e.classList.contains("cell_mine")&&e.classList.add("cell_flag")})))}function I(e){const t=e;t.classList.contains("cell_flag")||(t.classList.remove("cell_close"),t.classList.add("cell_show"))}function j(e){const t=e,n=document.querySelector(".mines"),a=document.querySelector(".flags");t.classList.contains("cell_close")&&(M(new Audio(c)),t.classList.contains("cell_flag")?(t.classList.remove("cell_flag"),d-=1,i=l-d,n.textContent=`${i}`.padStart(3,0),a.textContent=`${d}`.padStart(3,0)):(t.classList.add("cell_flag"),d+=1,i=l-d,n.textContent=`${i}`.padStart(3,0),a.textContent=`${d}`.padStart(3,0)))}function F(e){const t=document.querySelectorAll(".cell");return Array.from(t).indexOf(e.target)}function O(e,t,n){let a=[];n&&(a=n),a.push(t);const c=document.querySelectorAll(".cell"),o=e.length,s=t/o,l=Math.floor(s),r=Math.round((s-l)*o);for(let t=-1;t<=1;){const n=l+t;for(let t=-1;t<=1;){const s=r+t;if(n>=0&&n<o&&s>=0&&s<o&&(n!==l||s!==r)){const t=n*o+s,l=c[t];I(l),l.classList.contains("cell_empty")&&-1===a.indexOf(t)&&O(e,t,a)}t+=1}t+=1}}function W(){const e=document.querySelector(".steps");p+=1,e.textContent=`${p}`.padStart(3,0)}function H(){M(new Audio(n))}function Y(){const e=document.querySelector(".volume");S?(e.classList.remove("volume_mute"),S=!1):(e.classList.add("volume_mute"),H(),S=!0)}function J(){const e=document.querySelector(".theme"),t=document.querySelector(".wrapper");"light"===h?(e.classList.add("theme_dark"),t.classList.add("wrapper_dark"),h="dark"):(e.classList.remove("theme_dark"),t.classList.remove("wrapper_dark"),h="light")}function P(e){let t="";const n=document.querySelector(".playground"),a=(new Date).toLocaleString();y=!0,"usersInitSave"===e?(t="The player saved the game",L.name=`${t}: ${a}`,L.quantityMines=l,L.sizePlayground=r,L.counterTime=m,L.counterFlag=d,L.currentAmountMines=i,L.counterSteps=p,L.isFirstClick=_,L.isLose=v,L.isWinner=f,L.isMute=S,L.haveSave=y,L.currentTheme=h,L.score=b,L.html=n.innerHTML,T("Save",L.name)):"autoSave"===e&&(t="Auto save game",g.name=`${t}: ${a}`,g.quantityMines=l,g.sizePlayground=r,g.counterTime=m,g.counterFlag=d,g.currentAmountMines=i,g.counterSteps=p,g.isFirstClick=_,g.isLose=v,g.isWinner=f,g.isMute=S,g.haveSave=y,g.currentTheme=h,g.score=b,g.html=n.innerHTML,T("Save",g.name))}function D(e,t){const n=document.querySelector(".wrapper"),a=document.querySelector(".playground"),c=document.querySelector(".quantity-mines"),o=document.querySelector(".size"),s=document.querySelector(".volume"),u=document.querySelector(".theme"),b=document.querySelector(".mines"),L=document.querySelector(".flags"),g=document.querySelector(".steps"),E=document.querySelector(".times");t&&A(),y?(a.innerHTML=e.html,l=e.quantityMines,r=e.sizePlayground,m=e.counterTime,d=e.counterFlag,i=e.currentAmountMines,p=e.counterSteps,_=e.isFirstClick,v=e.isLose,f=e.isWinner,S=e.isMute,y=e.haveSave,h=e.currentTheme,n.className=`wrapper outer wrapper_${r}`,c.value=l,o.selectedIndex=10===r?1:15===r?2:3,S?s.classList.add("volume_mute"):(s.classList.remove("volume_mute"),H()),"light"===h?u.classList.remove("theme_dark"):(u.classList.add("theme_dark"),h="dark"),b.textContent=`${i}`.padStart(3,0),L.textContent=`${d}`.padStart(3,0),g.textContent=`${p}`.padStart(3,0),E.textContent=`${m}`.padStart(3,0),G(),k(),T("Load",e.name),$(r)):T("Not save")}function B(e,t){document.querySelector(".playground").innerHTML="";const n=w(q(E(e),t)),a=n.length;return C(n),k(),$(a),n}function U(e){m=0,d=0,p=0,document.querySelector(".emoji").className="emoji happy",B(e),x(),_=!0,f=!1,v=!1,H()}function K(e){e&&A(),r=u,U(r)}window.onload=function(){!function(){const e=document.querySelector("body"),t=document.createElement("main");t.className="main";const n=document.createElement("section");n.className="wrapper outer";const a=document.createElement("h1");a.className="title inter",a.textContent="Minesweeper";const c=document.createElement("div");c.className="settings inter";const o=document.createElement("div");o.className="controls";const s=document.createElement("div");s.className="buttons-panel";const l=document.createElement("button");l.className="button outer button_new-game",l.textContent="New Game";const r=document.createElement("button");r.className="button outer button_save",r.textContent="Save Game";const u=document.createElement("button");u.className="button outer button_load",u.textContent="Load Game";const m=document.createElement("input");m.className="quantity-mines input inter",m.type="number",m.id="quantity-mines",m.setAttribute("min","10"),m.setAttribute("max","99"),m.setAttribute("placeholder","10 Mines...");const d=document.createElement("select");d.className="size input inter",d.textContent="Level";const i=document.createElement("option");i.className="def-size",i.setAttribute("value",""),i.setAttribute("disabled","disabled"),i.setAttribute("selected","selected"),i.textContent="Level ( easy )",i.value=10;const p=document.createElement("option");p.className="small-size",p.textContent="easy - 10x10",p.value=10;const _=document.createElement("option");_.className="medium-size",_.textContent="medium - 15x15",_.value=15;const v=document.createElement("option");v.className="hard-size",v.textContent="hard - 25x25",v.value=25;const f=document.createElement("button");f.className="volume outer";const S=document.createElement("button");S.className="theme outer";const y=document.createElement("div");y.className="status-game inter";const h=document.createElement("div");h.className="status status-mines";const b=document.createElement("label");b.className="label-mines",b.textContent="Mines left";const L=document.createElement("span");L.className="amount inter mines";const g=document.createElement("div");g.className="status status-flags";const E=document.createElement("label");E.className="label-flags",E.textContent="Flags used";const N=document.createElement("span");N.className="amount inter flags";const q=document.createElement("button");q.className="emoji happy";const w=document.createElement("div");w.className="status status-steps";const x=document.createElement("label");x.className="label-steps",x.textContent="Steps";const C=document.createElement("span");C.className="amount inter steps";const k=document.createElement("div");k.className="status status-time";const $=document.createElement("label");$.className="label-time",$.textContent="Time";const T=document.createElement("span");T.className="amount inter times";const A=document.createElement("div");A.className="playground inter";const M=document.createElement("ol");M.className="score inter",M.textContent="Last 10 games won!";const G=document.createElement("h2");G.className="modal__title";const z=document.createElement("h3");z.className="modal__subtitle subtitle_first";const I=document.createElement("button");I.className="button outer button__modal_save-auto hidden",I.textContent="Load Auto Save";const j=document.createElement("h3");j.className="modal__subtitle subtitle_second hidden";const F=document.createElement("button");F.className="button outer button__modal_save-player hidden",F.textContent="Load Your Save";const O=document.createElement("h3");O.className="modal__subtitle subtitle_third hidden";const W=document.createElement("button");W.className="button outer button__modal_new-game hidden",W.textContent="Start New Game";const H=document.createElement("button");H.className="button outer button__modal_close",H.textContent="Close";const Y=document.createElement("div");Y.className="modal";const J=document.createElement("div");J.className="modal__wrapper",h.append(b),h.append(L),g.append(E),g.append(N),w.append(x),w.append(C),k.append($),k.append(T),y.append(h),y.append(g),y.append(q),y.append(w),y.append(k),d.append(i),d.append(p),d.append(_),d.append(v),o.append(S),o.append(m),o.append(d),o.append(f),s.append(l),s.append(r),s.append(u),c.append(o),c.append(s),Y.append(G),Y.append(z),Y.append(I),Y.append(j),Y.append(F),Y.append(O),Y.append(W),Y.append(H),J.append(Y),n.append(a),n.append(c),n.append(y),n.append(A),n.append(M),n.append(J),t.append(n),e.append(t)}(),x();const e=document.querySelector(".size");r=e.value,e.addEventListener("change",(()=>{u=e.value,H()}));const t=document.querySelector(".quantity-mines");t.addEventListener("change",(()=>{H(),t.value<10?(l=10,t.value=l):t.value>99?(l=99,t.value=l):l=t.value}));const n=w(q(E(r))),c=n.length;let o=[];C(n),$(c);const d=document.querySelector(".emoji"),i=document.querySelector(".volume"),p=document.querySelector(".button_new-game"),f=document.querySelector(".button_save"),S=document.querySelector(".button_load"),y=document.querySelector(".button__modal_close"),h=document.querySelector(".button__modal_save-auto"),b=document.querySelector(".button__modal_save-player"),N=document.querySelector(".button__modal_new-game"),k=document.querySelector(".theme"),Q=document.querySelector(".playground");Q.addEventListener("mouseup",(function(e){const t=e.target,n=t.classList.contains("cell_flag"),c=t.classList.contains("cell_close");if(_){const t=F(e);o=B(r,t),function(e,t,n){const a=document.querySelectorAll(".cell");let c=0;G(),a.forEach((a=>{if(c===n){const c=a;2===e.button?j(c):c.classList.contains("cell_empty")?(W(),H(),I(c),O(t,n)):c.classList.contains("cell")&&(W(),H(),I(c)),z(r)}c+=1}))}(e,o,t)}else if(2===e.button)j(t);else if(!n&&c&&!v){if(W(),t.classList.contains("cell_mine"))t.classList.add("exp"),function(){M(new Audio(a)),M(new Audio(s)),m=0;const e=document.querySelectorAll(".cell_mine"),t=document.querySelectorAll(".cell_flag"),n=document.querySelectorAll(".cell_close"),c=document.querySelector(".emoji");T("Lose"),c.classList.remove("happy"),c.classList.add("sad"),e.forEach((e=>{e.classList.contains("cell_flag")||e.classList.add("cell_show")})),t.forEach((e=>{e.classList.contains("cell_mine")||(e.classList.remove("cell_flag"),e.classList.remove("cell_close"),e.classList.add("cell_flag-wrong"))})),n.forEach((e=>{e.classList.remove("cell_close"),e.classList.add("cell_blocked")})),_=!0}(),v=!0;else if(t.classList.contains("cell_empty")){H(),I(t);const n=F(e);O(o,n)}else t.classList.contains("cell")&&(H(),I(t));z(r)}_=!1})),Q.addEventListener("contextmenu",(function(e){e.preventDefault()})),d.addEventListener("click",(()=>U(r))),p.addEventListener("click",K),y.addEventListener("click",A),h.addEventListener("click",(()=>D(g,"closeModal"))),b.addEventListener("click",(()=>D(L,"closeModal"))),N.addEventListener("click",(()=>K("closeModal"))),f.addEventListener("click",(()=>P("usersInitSave"))),S.addEventListener("click",(()=>D(L))),i.addEventListener("click",Y),k.addEventListener("click",J)},window.addEventListener("load",(function(){if(localStorage.getItem("autoSavedGameToLs")){const n=JSON.parse(localStorage.getItem("autoSavedGameToLs")),a=JSON.parse(localStorage.getItem("playerSavedGameToLs"));g=n,L=a,y=g.haveSave,b=n.score,e=g,t=L,document.querySelector(".modal").classList.add("modal__save"),T("Choose save",e.name,t.name)}var e,t})),window.addEventListener("beforeunload",(function(){P("autoSave"),localStorage.setItem("autoSavedGameToLs",JSON.stringify(g)),localStorage.setItem("playerSavedGameToLs",JSON.stringify(L))}))})()})();