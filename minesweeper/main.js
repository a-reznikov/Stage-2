(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");if(a.length)for(var c=a.length-1;c>-1&&!t;)t=a[c--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function t(e){const t=document.createElement("button");switch(e){case 1:t.className="cell cell_one cell_close";break;case 2:t.className="cell cell_two cell_close";break;case 3:t.className="cell cell_three cell_close";break;case 4:t.className="cell cell_four cell_close";break;case 5:t.className="cell cell_five cell_close";break;case 6:t.className="cell cell_six cell_close";break;case 7:t.className="cell cell_seven cell_close";break;case 8:t.className="cell cell_eight cell_close";break;case 9:t.className="cell cell_mine cell_close";break;default:t.className="cell cell_empty cell_close"}return 0!==e&&9!==e&&(t.textContent=e),t}const n=e.p+"9f776e97fb460a2dada1.mp3",a=e.p+"b83723f037844d797761.mp3",c=e.p+"876aaa7396c15ad49872.mp3",o=e.p+"fb4c7651f758bcc97bd5.mp3",s=e.p+"bb950f1cd7c723ac10b1.mp3",l="user",r="auto";let u=[],m=10,d=10,i=10,p=0,v=0,_=m-v,S=0,f=!0,h=!1,y=!1,L=!1,b=!1,g=!1,E="light",N=[],q={},x={};function w(e){let t=0;t=e||10;const n=[];let a=0;for(;a<t;){n[a]=[];for(let e=0;e<t;)n[a].push(0),e+=1;a+=1}return n}function C(e){return Math.floor(Math.random()*e)}function k(e,t){const n=e.length,a=function(e,t){const n=e**2,a=[];for(;a.length<m;){const e=C(n);-1===a.indexOf(e)&&e!==t&&a.push(e)}return a}(n,t),c=e;for(let e=0;e<a.length;){const t=a[e]/n,o=Math.floor(t),s=Math.round((t-o)*n);c[o][s]=9,e+=1}return c}function $(e){u=e;const t=u.length;for(let e=0;e<t;){for(let n=0;n<t;){if(9===u[e][n])for(let a=-1;a<=1;){const c=e+a;for(let e=-1;e<=1;){const a=n+e;c>=0&&c<t&&a>=0&&a<t&&9!==u[c][a]&&(u[c][a]+=1),e+=1}a+=1}n+=1}e+=1}return u}function A(){const e=document.querySelector(".mines"),t=document.querySelector(".flags"),n=document.querySelector(".steps"),a=document.querySelector(".times");e.textContent=`${m}`.padStart(3,0),t.textContent=`${v}`.padStart(3,0),a.textContent="000",n.textContent="000"}function T(e){u=e;const n=document.querySelector(".playground"),a=u.length;for(let e=0;e<a;){for(let c=0;c<a;)n.append(t(u[e][c])),c+=1;e+=1}}function M(){const e=document.querySelector(".score");e.innerHTML="",e.textContent="Last 10 games won!";let t=0;N.forEach((n=>{t+=1;const a=document.createElement("li");a.className="results",a.textContent=`${t}. ${n}`,e.append(a)}))}function I(e){const t=e,n=document.querySelector(".wrapper"),a=document.querySelector(".theme");n.className=`wrapper outer wrapper_${t}`,"light"===E?(a.classList.remove("theme_dark"),n.classList.remove("wrapper_dark")):(a.classList.add("theme_dark"),n.classList.add("wrapper_dark"))}function z(e,t,n){const a=document.querySelector(".modal__wrapper"),c=document.querySelector(".modal__title"),o=document.querySelector(".subtitle_first"),s=document.querySelector(".subtitle_second"),l=document.querySelector(".subtitle_third");let r="",u="",m="",d="";a.classList.add("modal__wrapper_overlay"),"Save"===e?(r="The game has been saved!",u=t):"Load"===e?(r="The game has been load!",u=t):"Not save"===e?(r="You don't have a saved game",u="Use the Save Game before"):"Choose save"===e?(r="Choose a saved game:",u=t,m=b?n:"No saved game yet",d="Start New Game"):"Win"===e?(r=0===p?`You ${e}! Time: faster than 1 sec, Steps:  ${S}`:`You ${e}! Time: ${p} sec, Steps:  ${S}`,u="You're a real genius!"):(r=`You ${e}! Time: ${p} sec, Steps:  ${S}`,u="Try again!"),c.textContent=r,o.textContent=u,s.textContent=m,l.textContent=d}function G(){const e=document.querySelector(".modal__wrapper"),t=document.querySelector(".modal");e.classList.remove("modal__wrapper_overlay"),t.classList.remove("modal__save")}function F(e){const t=e;t.volume=L?0:1,t.play()}function j(){const e=document.querySelector(".times"),t=setInterval((()=>{h||f||y?clearInterval(t):(p+=1,e.textContent=`${p}`.padStart(3,0))}),1e3)}function W(e){const t=document.querySelectorAll(".cell_show"),n=document.querySelectorAll(".cell_mine"),a=document.querySelector(".emoji");let c=0;t.forEach((e=>{e.classList.contains("cell_mine")||(c+=1)})),c===e**2-m&&(!function(){let e="";e=0===p?`Winner Time: faster than 1 sec, Steps:  ${S}`:`Winner Time: ${p} sec, Steps:  ${S}`,10===N.length&&N.pop(),N.unshift(e),M()}(),z("Win"),F(new Audio(o)),y=!0,a.classList.add("win"),n.forEach((e=>{e.classList.contains("cell_mine")&&e.classList.add("cell_flag")})))}function O(e){const t=e;t.classList.contains("cell_flag")||(t.classList.remove("cell_close"),t.classList.add("cell_show"))}function H(e){const t=e,n=document.querySelector(".mines"),a=document.querySelector(".flags");t.classList.contains("cell_close")&&(F(new Audio(c)),t.classList.contains("cell_flag")?(t.classList.remove("cell_flag"),v-=1,_=m-v,n.textContent=`${_}`.padStart(3,0),a.textContent=`${v}`.padStart(3,0)):(t.classList.add("cell_flag"),v+=1,_=m-v,n.textContent=`${_}`.padStart(3,0),a.textContent=`${v}`.padStart(3,0)))}function U(e){const t=document.querySelectorAll(".cell");return Array.from(t).indexOf(e.target)}function Y(e,t,n){let a=[];n&&(a=n),a.push(t);const c=document.querySelectorAll(".cell"),o=u.length,s=t/o,l=Math.floor(s),r=Math.round((s-l)*o);for(let e=-1;e<=1;){const t=l+e;for(let e=-1;e<=1;){const n=r+e;if(t>=0&&t<o&&n>=0&&n<o&&(t!==l||n!==r)){const e=t*o+n,s=c[e];O(s),s.classList.contains("cell_empty")&&-1===a.indexOf(e)&&Y(0,e,a)}e+=1}e+=1}}function P(){const e=document.querySelector(".steps");S+=1,e.textContent=`${S}`.padStart(3,0)}function J(){F(new Audio(n))}function D(){const e=document.querySelector(".volume");L?(e.classList.remove("volume_mute"),L=!1):(e.classList.add("volume_mute"),J(),L=!0)}function B(){const e=document.querySelector(".theme"),t=document.querySelector(".wrapper");"light"===E?(e.classList.add("theme_dark"),t.classList.add("wrapper_dark"),E="dark"):(e.classList.remove("theme_dark"),t.classList.remove("wrapper_dark"),E="light")}function K(e){let t="";const n=document.querySelector(".playground"),a=(new Date).toLocaleString();"user"===e?(b=!0,t="The player saved the game",q.name=`${t}: ${a}`,q.quantityMines=m,q.sizePlayground=d,q.counterTime=p,q.counterFlag=v,q.currentAmountMines=_,q.counterSteps=S,q.isFirstClick=f,q.isLose=h,q.isWinner=y,q.isMute=L,q.haveSaveUser=b,q.haveSaveAuto=g,q.currentTheme=E,q.score=N,q.matrix=u,q.html=n.innerHTML,z("Save",q.name)):"auto"===e&&(g=!0,t="Auto save game",x.name=`${t}: ${a}`,x.quantityMines=m,x.sizePlayground=d,x.counterTime=p,x.counterFlag=v,x.currentAmountMines=_,x.counterSteps=S,x.isFirstClick=f,x.isLose=h,x.isWinner=y,x.isMute=L,x.haveSaveUser=b,x.haveSaveAuto=g,x.currentTheme=E,x.score=N,x.matrix=u,x.html=n.innerHTML,z("Save",x.name))}function Q(e,t,n){const a=document.querySelector(".wrapper"),c=document.querySelector(".playground"),o=document.querySelector(".quantity-mines"),s=document.querySelector(".size"),N=document.querySelector(".volume"),q=document.querySelector(".theme"),x=document.querySelector(".mines"),w=document.querySelector(".flags"),C=document.querySelector(".steps"),k=document.querySelector(".times");t===l?b?(c.innerHTML=e.html,m=e.quantityMines,d=e.sizePlayground,p=e.counterTime,v=e.counterFlag,_=e.currentAmountMines,S=e.counterSteps,f=e.isFirstClick,h=e.isLose,y=e.isWinner,L=e.isMute,b=e.haveSaveUser,g=e.haveSaveAuto,E=e.currentTheme,u=e.matrix,a.className=`wrapper outer wrapper_${d}`,o.value=m,"10"===d?s.selectedIndex=1:"15"===d?s.selectedIndex=2:"25"===d&&(s.selectedIndex=3),i=+d,L?N.classList.add("volume_mute"):(N.classList.remove("volume_mute"),J()),"light"===E?q.classList.remove("theme_dark"):(q.classList.add("theme_dark"),E="dark"),x.textContent=`${_}`.padStart(3,0),w.textContent=`${v}`.padStart(3,0),C.textContent=`${S}`.padStart(3,0),k.textContent=`${p}`.padStart(3,0),M(),n&&(G(),j()),z("Load",e.name),I(d)):(G(),z("Not save")):t===r&&(g?(c.innerHTML=e.html,m=e.quantityMines,d=e.sizePlayground,p=e.counterTime,v=e.counterFlag,_=e.currentAmountMines,S=e.counterSteps,f=e.isFirstClick,h=e.isLose,y=e.isWinner,L=e.isMute,b=e.haveSaveUser,g=e.haveSaveAuto,E=e.currentTheme,u=e.matrix,a.className=`wrapper outer wrapper_${d}`,o.value=m,"10"===d?s.selectedIndex=1:"15"===d?s.selectedIndex=2:"25"===d&&(s.selectedIndex=3),i=+d,L?N.classList.add("volume_mute"):(N.classList.remove("volume_mute"),J()),"light"===E?q.classList.remove("theme_dark"):(q.classList.add("theme_dark"),E="dark"),x.textContent=`${_}`.padStart(3,0),w.textContent=`${v}`.padStart(3,0),C.textContent=`${S}`.padStart(3,0),k.textContent=`${p}`.padStart(3,0),M(),n&&(G(),j()),z("Load",e.name),I(d)):z("Not save"))}function R(e,t){document.querySelector(".playground").innerHTML="";const n=k(w(e),t);u=$(n);const a=u.length;return T(u),M(),I(a),u}function V(e){p=0,v=0,S=0,p=0,document.querySelector(".emoji").className="emoji happy",R(e),A(),f=!0,y=!1,h=!1,J()}function X(e){e&&G(),d=i,V(d)}window.onload=function(){!function(){const e=document.querySelector("body"),t=document.createElement("main");t.className="main";const n=document.createElement("section");n.className="wrapper outer";const a=document.createElement("h1");a.className="title inter",a.textContent="Minesweeper";const c=document.createElement("div");c.className="settings inter";const o=document.createElement("div");o.className="controls";const s=document.createElement("div");s.className="buttons-panel";const l=document.createElement("button");l.className="button outer button_new-game",l.textContent="New Game";const r=document.createElement("button");r.className="button outer button_save",r.textContent="Save Game";const u=document.createElement("button");u.className="button outer button_load",u.textContent="Load Game";const m=document.createElement("input");m.className="quantity-mines input inter",m.type="number",m.id="quantity-mines",m.setAttribute("min","10"),m.setAttribute("max","99"),m.setAttribute("placeholder","10 Mines...");const d=document.createElement("select");d.className="size input inter",d.textContent="Level";const i=document.createElement("option");i.className="def-size",i.setAttribute("value",""),i.setAttribute("disabled","disabled"),i.setAttribute("selected","selected"),i.textContent="Level ( easy )",i.value=10;const p=document.createElement("option");p.className="small-size",p.textContent="easy - 10x10",p.value=10;const v=document.createElement("option");v.className="medium-size",v.textContent="medium - 15x15",v.value=15;const _=document.createElement("option");_.className="hard-size",_.textContent="hard - 25x25",_.value=25;const S=document.createElement("button");S.className="volume outer";const f=document.createElement("button");f.className="theme outer";const h=document.createElement("div");h.className="status-game inter";const y=document.createElement("div");y.className="status status-mines";const L=document.createElement("label");L.className="label-mines",L.textContent="Mines left";const b=document.createElement("span");b.className="amount inter mines";const g=document.createElement("div");g.className="status status-flags";const E=document.createElement("label");E.className="label-flags",E.textContent="Flags used";const N=document.createElement("span");N.className="amount inter flags";const q=document.createElement("button");q.className="emoji happy";const x=document.createElement("div");x.className="status status-steps";const w=document.createElement("label");w.className="label-steps",w.textContent="Steps";const C=document.createElement("span");C.className="amount inter steps";const k=document.createElement("div");k.className="status status-time";const $=document.createElement("label");$.className="label-time",$.textContent="Time";const A=document.createElement("span");A.className="amount inter times";const T=document.createElement("div");T.className="playground inter";const M=document.createElement("ol");M.className="score inter",M.textContent="Last 10 games won!";const I=document.createElement("h2");I.className="modal__title";const z=document.createElement("h3");z.className="modal__subtitle subtitle_first";const G=document.createElement("button");G.className="button outer button__modal_save-auto hidden",G.textContent="Load Auto Save";const F=document.createElement("h3");F.className="modal__subtitle subtitle_second hidden";const j=document.createElement("button");j.className="button outer button__modal_save-player hidden",j.textContent="Load Your Save";const W=document.createElement("h3");W.className="modal__subtitle subtitle_third hidden";const O=document.createElement("button");O.className="button outer button__modal_new-game hidden",O.textContent="Start New Game";const H=document.createElement("button");H.className="button outer button__modal_close",H.textContent="Close";const U=document.createElement("div");U.className="modal";const Y=document.createElement("div");Y.className="modal__wrapper",y.append(L),y.append(b),g.append(E),g.append(N),x.append(w),x.append(C),k.append($),k.append(A),h.append(y),h.append(g),h.append(q),h.append(x),h.append(k),d.append(i),d.append(p),d.append(v),d.append(_),o.append(f),o.append(m),o.append(d),o.append(S),s.append(l),s.append(r),s.append(u),c.append(o),c.append(s),U.append(I),U.append(z),U.append(G),U.append(F),U.append(j),U.append(W),U.append(O),U.append(H),Y.append(U),n.append(a),n.append(c),n.append(h),n.append(T),n.append(M),n.append(Y),t.append(n),e.append(t)}(),A();const e=document.querySelector(".size");d=e.value,e.addEventListener("change",(()=>{i=e.value,J()}));const t=document.querySelector(".quantity-mines");t.addEventListener("change",(()=>{J(),t.value<10?(m=10,t.value=m):t.value>99?(m=99,t.value=m):m=t.value}));const n=k(w(d));u=$(n);const c=u.length;let o=[];T(u),I(c);const p=document.querySelector(".emoji"),v=document.querySelector(".volume"),_=document.querySelector(".button_new-game"),S=document.querySelector(".button_save"),y=document.querySelector(".button_load"),L=document.querySelector(".button__modal_close"),b=document.querySelector(".button__modal_save-auto"),g=document.querySelector(".button__modal_save-player"),E=document.querySelector(".button__modal_new-game"),N=document.querySelector(".theme"),C=document.querySelector(".playground");C.addEventListener("mouseup",(function(e){const t=e.target,n=t.classList.contains("cell_flag"),c=t.classList.contains("cell_close");if(f){const t=U(e);o=R(d,t),function(e,t,n){const a=document.querySelectorAll(".cell");let c=0;j(),a.forEach((t=>{if(c===n){const a=t;2===e.button?H(a):a.classList.contains("cell_empty")?(P(),J(),O(a),Y(0,n)):a.classList.contains("cell")&&(P(),J(),O(a)),W(d)}c+=1}))}(e,0,t)}else 2===e.button?H(t):n||!c||h||(P(),t.classList.contains("cell_mine")?(t.classList.add("exp"),function(){F(new Audio(a)),F(new Audio(s));const e=document.querySelectorAll(".cell_mine"),t=document.querySelectorAll(".cell_flag"),n=document.querySelectorAll(".cell_close"),c=document.querySelector(".emoji");z("Lose"),c.classList.remove("happy"),c.classList.add("sad"),e.forEach((e=>{e.classList.contains("cell_flag")||e.classList.add("cell_show")})),t.forEach((e=>{e.classList.contains("cell_mine")||(e.classList.remove("cell_flag"),e.classList.remove("cell_close"),e.classList.add("cell_flag-wrong"))})),n.forEach((e=>{e.classList.remove("cell_close"),e.classList.add("cell_blocked")})),f=!0}(),h=!0):t.classList.contains("cell_empty")?(J(),O(t),Y(0,U(e))):t.classList.contains("cell")&&(J(),O(t)),W(d));f=!1})),C.addEventListener("contextmenu",(function(e){e.preventDefault()})),p.addEventListener("click",(()=>V(d))),_.addEventListener("click",X),L.addEventListener("click",G),b.addEventListener("click",(()=>Q(x,r,"closeModal"))),g.addEventListener("click",(()=>Q(q,l,"closeModal"))),E.addEventListener("click",(()=>X("closeModal"))),S.addEventListener("click",(()=>K(l))),y.addEventListener("click",(()=>Q(q,l))),v.addEventListener("click",D),N.addEventListener("click",B)},window.addEventListener("load",(function(){if(localStorage.getItem("autoSavedGameToLs")){const n=JSON.parse(localStorage.getItem("autoSavedGameToLs")),a=JSON.parse(localStorage.getItem("playerSavedGameToLs"));x=n,q=a,b=x.haveSaveUser,g=x.haveSaveAuto,N=n.score,e=x,t=q,document.querySelector(".modal").classList.add("modal__save"),z("Choose save",e.name,t.name)}var e,t})),window.addEventListener("beforeunload",(function(){K(r),localStorage.setItem("autoSavedGameToLs",JSON.stringify(x)),localStorage.setItem("playerSavedGameToLs",JSON.stringify(q))}))})()})();